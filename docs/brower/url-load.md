# 输入URL后浏览器的操作

### 导航流程

##### 1.用户输入
匹配用户输入的是url还是搜索内容。

* 如果是搜索内容则会使用浏览器默认的搜索引擎合成新的带搜索关键词的URL
* 如果输入的内容符合URL规则，就会根据规则（例如补充协议头）生成新的URL。

当输入回车之后，当前标签页还有触发关于beforeunloadh和unload等相关的事件

而在[beforeunload事件](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/beforeunload_event)里则可以询问用户是否确认要离开当前等操作，因此可以通过它来取消页面导航。

当页面没有beforeunload事件或者用户确认离开当前页。

那么新的网页就会进入加载状态。

##### 2.URL请求过程
页面资源请求:
* 浏览器进程会通过进程间通信（IPC）把 URL 请求发送至网络进程。
* 网络进程会查找本地缓存是否缓存了该资源。
* 如果有缓存资源，那么直接返回资源给浏览器进程。
* 如果在缓存中没有查找到资源，那么直接进入网络请求流程。
* 请求前的第一步是要进行[DNS解析](/network/dns-parse)，以获取请求域名的服务器 IP 地址。
* 建立TCP连接，如果请求协议是 HTTPS，那么还需要建立 TLS 连接。
* 连接建立之后，网络进程会构建请求行、请求头等信息，并把和该域名相关的 cookie 等数据附加到请求头中，然后向服务器发送构建的请求信息。
* 服务器接收到请求信息后，会根据请求信息生成响应数据（包括响应行、响应头和响应体等信息），并发给网络进程。






















